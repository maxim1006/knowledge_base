<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        .div {
            width: 10px;
            height: 10px;
            margin: 1px;
            background-color: #cccccc;
            position: absolute;
            top: 0;
            left: 1px;
        }
    </style>
</head>
<body>

<div id="wrapper"></div>


<script>

    let elemsLength = 100,
        elem;

    while (elemsLength--) {
        elem = document.createElement('div');
        elem.classList.add('div');
        elem.style.top = elemsLength*11 + 'px';
        wrapper.appendChild(elem);
    }

    window.requestAnimFrame = (function (callback) {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {
                window.setTimeout(callback, 1000 / 60);
            };
    })();

    let div = document.querySelectorAll('.div');

    function go () {
        //div.style.left += 1;
        [...div].forEach((el)=> {
            el.style.left = parseFloat(getComputedStyle(el).left) + 1 + 'px';
        });

    }

//    var fps = 60;
//    var now;
//    var then = Date.now();
//    var interval = 1000/fps;
//    var delta;
//
//    function animate() {
//        requestAnimationFrame(animate);
//
//        now = Date.now();
//        delta = now - then;
//
//        if (delta > interval) {
//            // update time stuffs
//
//            // Just `then = now` is not enough.
//            // Lets say we set fps at 10 which means
//            // each frame must take 100ms
//            // Now frame executes in 16ms (60fps) so
//            // the loop iterates 7 times (16*7 = 112ms) until
//            // delta > interval === true
//            // Eventually this lowers down the FPS as
//            // 112*10 = 1120ms (NOT 1000ms).
//            // So we have to get rid of that extra 12ms
//            // by subtracting delta (112) % interval (100).
//            // Hope that makes sense.
//
//            then = now - (delta % interval);
//
//            go();
//        }
//    }
//    animate();

    (function animloop(){
        requestAnimFrame(animloop);
        go();
    })();

//    setTimeout(function st() {
//        go();
//        setTimeout(st, 1000 / 60);
//    }, 1000 / 60)





</script>

</body>
</html>